{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hp/Desktop/Projeler/PanaseWeb/panase-frontend/src/components/dashboard/DashboardHeader.tsx"],"sourcesContent":["// src/components/dashboard/DashboardHeader.tsx\r\n\r\n'use client';\r\n\r\nimport { Bell, UserCircle } from 'lucide-react';\r\n\r\n// Doktor bilgisini LocalStorage'dan almak\r\nconst getDoctorName = () => {\r\n  if (typeof window !== 'undefined') {\r\n    const user = localStorage.getItem('user');\r\n    if (user) {\r\n      try {\r\n        const parsedUser = JSON.parse(user);\r\n        return parsedUser.firstName || \"Doktor\";\r\n      } catch (e) {\r\n        return \"Doktor\";\r\n      }\r\n    }\r\n  }\r\n  return \"Doktor\";\r\n};\r\n\r\n// Bu bileşen, hangi sayfada olduğumuzu 'title' prop'u ile alacak\r\nexport default function DashboardHeader({ title }: { title: string }) {\r\n  const doctorName = getDoctorName();\r\n\r\n  return (\r\n    <div className=\"flex justify-between items-center mb-8\">\r\n      <h1 className=\"text-4xl font-bold text-gray-900\">{title}</h1>\r\n      \r\n      <div className=\"flex items-center space-x-4\">\r\n        {/* İkon 1: Bildirimler (Yeni) */}\r\n        <button className=\"p-2 rounded-full text-gray-500 hover:bg-gray-200 transition-colors\">\r\n          <Bell className=\"w-5 h-5\" />\r\n        </button>\r\n\r\n        {/* Doktor Adı ve Avatarı */}\r\n        <div className=\"flex items-center space-x-3\">\r\n          <span className=\"text-md font-medium text-gray-700 hidden sm:block\">\r\n            {doctorName}\r\n          </span>\r\n          <div className=\"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center\">\r\n            <UserCircle className=\"w-6 h-6 text-indigo-600\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,+CAA+C;;;;;;AAI/C;AAAA;AAFA;;;AAIA,0CAA0C;AAC1C,MAAM,gBAAgB;IACpB;;IAWA,OAAO;AACT;AAGe,SAAS,gBAAgB,EAAE,KAAK,EAAqB;IAClE,MAAM,aAAa;IAEnB,qBACE,wSAAC;QAAI,WAAU;;0BACb,wSAAC;gBAAG,WAAU;0BAAoC;;;;;;0BAElD,wSAAC;gBAAI,WAAU;;kCAEb,wSAAC;wBAAO,WAAU;kCAChB,cAAA,wSAAC,oQAAI;4BAAC,WAAU;;;;;;;;;;;kCAIlB,wSAAC;wBAAI,WAAU;;0CACb,wSAAC;gCAAK,WAAU;0CACb;;;;;;0CAEH,wSAAC;gCAAI,WAAU;0CACb,cAAA,wSAAC,0RAAU;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMlC","debugId":null}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hp/Desktop/Projeler/PanaseWeb/panase-frontend/src/app/dashboard/randevular/page.tsx"],"sourcesContent":["// src/app/dashboard/randevular/page.tsx\r\n\r\n'use client'; \r\n\r\nimport { useEffect, useState } from 'react'; \r\nimport { format } from 'date-fns';\r\nimport { tr } from 'date-fns/locale';\r\nimport { UserCircle, Phone, Mail, Check, X, CheckCircle } from 'lucide-react'; \r\nimport DashboardHeader from '@/components/dashboard/DashboardHeader'; \r\n\r\n// 1. Status Enum'u (Backend ile aynı olmalı)\r\nenum AppointmentStatus {\r\n  PENDING = 'pending',\r\n  CONFIRMED = 'confirmed',\r\n  CANCELLED = 'cancelled',\r\n  COMPLETED = 'completed',\r\n}\r\n\r\n// 2. Appointment Tipi (Backend Entity ile aynı)\r\ninterface Appointment {\r\n  id: string;\r\n  name: string;\r\n  dateTime: string; \r\n  phone: string;\r\n  email: string;\r\n  type: 'Online' | 'Yüz Yüze';\r\n  status: AppointmentStatus; \r\n}\r\n\r\n// 3. API Adresi (Portunuzu kontrol edin, 3001 veya 3002)\r\nconst API_URL = 'http://localhost:3001/appointments'; \r\n\r\nexport default function DashboardPage() {\r\n  \r\n  const [appointments, setAppointments] = useState<Appointment[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // 4. Veri Çekme (Data Fetching) Fonksiyonu\r\n  useEffect(() => {\r\n    fetchAppointments();\r\n  }, []); \r\n\r\n  const fetchAppointments = async () => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    try {\r\n      const token = localStorage.getItem('access_token');\r\n      if (!token) { throw new Error('Oturum bulunamadı veya geçersiz.'); }\r\n\r\n      const response = await fetch(API_URL, {\r\n        method: 'GET',\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n\r\n      if (response.status === 401) {\r\n        window.location.href = '/auth/login';\r\n        return;\r\n      }\r\n      if (!response.ok) {\r\n        throw new Error('Randevular çekilemedi.');\r\n      }\r\n\r\n      const data: Appointment[] = await response.json();\r\n      setAppointments(data);\r\n    } catch (err: unknown) {\r\n      setError(err instanceof Error ? err.message : 'Bilinmeyen bir hata oluştu.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // 5. Durum Güncelleme (Onayla/İptal Et) Fonksiyonu\r\n  const handleUpdateStatus = async (id: string, newStatus: AppointmentStatus) => {\r\n    const token = localStorage.getItem('access_token');\r\n    if (!token) {\r\n        setError(\"Oturum bulunamadı. Lütfen tekrar giriş yapın.\");\r\n        return;\r\n    }\r\n\r\n    // Butona tıklandığında geçici olarak UI'ı güncelle (İyimser Güncelleme)\r\n    setAppointments(prevAppointments => \r\n        prevAppointments.map(app => \r\n            app.id === id ? { ...app, status: newStatus } : app\r\n        )\r\n    );\r\n\r\n    try {\r\n        const response = await fetch(`${API_URL}/${id}/status`, {\r\n            method: 'PATCH',\r\n            headers: { \r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}` \r\n            },\r\n            body: JSON.stringify({ status: newStatus })\r\n        });\r\n\r\n        if (!response.ok) {\r\n            throw new Error('Durum güncellenemedi.');\r\n            // Başarısız olursa, listeyi API'den yeniden çekerek UI'ı düzelt\r\n            // fetchAppointments(); \r\n        }\r\n        \r\n        // Başarılı olursa, UI zaten güncellendi (İyimser Güncelleme sayesinde)\r\n        // İsteğe bağlı olarak listeyi yeniden çekebilirsiniz:\r\n        // fetchAppointments();\r\n\r\n    } catch (err: unknown) {\r\n        setError(err instanceof Error ? err.message : 'Bilinmeyen bir hata oluştu.');\r\n        // Başarısız olursa, listeyi API'den yeniden çekerek UI'ı düzelt\r\n        fetchAppointments();\r\n    }\r\n  };\r\n\r\n  // 6. Randevu Kartı Render Fonksiyonu\r\n  const renderAppointmentCard = (appointment: Appointment) => {\r\n    \r\n    let statusStyles = {\r\n      borderColor: 'border-yellow-500', \r\n      bgColor: 'bg-yellow-100',\r\n      textColor: 'text-yellow-800',\r\n      text: 'Onay Bekliyor'\r\n    };\r\n\r\n    if (appointment.status === AppointmentStatus.CONFIRMED) {\r\n      statusStyles = { borderColor: 'border-green-500', bgColor: 'bg-green-100', textColor: 'text-green-800', text: 'Onaylandı' };\r\n    } else if (appointment.status === AppointmentStatus.CANCELLED) {\r\n      statusStyles = { borderColor: 'border-red-500', bgColor: 'bg-red-100', textColor: 'text-red-800', text: 'İptal Edildi' };\r\n    } else if (appointment.status === AppointmentStatus.COMPLETED) {\r\n      statusStyles = { borderColor: 'border-gray-500', bgColor: 'bg-gray-100', textColor: 'text-gray-800', text: 'Tamamlandı' };\r\n    }\r\n    \r\n    return (\r\n      <div key={appointment.id} className={`bg-white p-5 rounded-lg shadow-md border-l-4 ${statusStyles.borderColor}`}>\r\n        <div className=\"flex justify-between items-start mb-3\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center\">\r\n              <UserCircle className=\"w-8 h-8 text-gray-400\" />\r\n            </div>\r\n            <div>\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">{appointment.name}</h3>\r\n              <p className=\"text-sm text-gray-500\">\r\n                {format(new Date(appointment.dateTime), 'dd MMMM yyyy - HH:mm', { locale: tr })}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <span className={`px-3 py-1 text-xs font-medium ${statusStyles.textColor} ${statusStyles.bgColor} rounded-full`}>\r\n            {statusStyles.text}\r\n          </span>\r\n        </div>\r\n        \r\n        <div className=\"space-y-2 mb-4\">\r\n          <p className=\"flex items-center text-sm text-gray-600\">\r\n            <Phone className=\"w-4 h-4 mr-2 text-gray-400\" /> {appointment.phone || 'Belirtilmemiş'}\r\n          </p> \r\n          <p className=\"flex items-center text-sm text-gray-600\">\r\n            <Mail className=\"w-4 h-4 mr-2 text-gray-400\" /> {appointment.email}\r\n          </p> \r\n        </div>\r\n\r\n        <div className=\"flex justify-end space-x-2 pt-4 border-t mt-4\">\r\n          \r\n          {appointment.status === AppointmentStatus.PENDING && (\r\n            <>\r\n              <button \r\n                onClick={() => handleUpdateStatus(appointment.id, AppointmentStatus.CANCELLED)}\r\n                className=\"flex items-center px-3 py-2 text-sm font-medium text-red-600 bg-red-50 rounded-lg hover:bg-red-100\"\r\n              >\r\n                <X className=\"w-4 h-4 mr-1\" /> İptal Et\r\n              </button>\r\n              <button \r\n                onClick={() => handleUpdateStatus(appointment.id, AppointmentStatus.CONFIRMED)}\r\n                className=\"flex items-center px-3 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700\"\r\n              >\r\n                <Check className=\"w-4 h-4 mr-1\" /> Onayla\r\n              </button>\r\n            </>\r\n          )}\r\n\r\n          {appointment.status === AppointmentStatus.CONFIRMED && (\r\n             <button \r\n                onClick={() => handleUpdateStatus(appointment.id, AppointmentStatus.COMPLETED)}\r\n                className=\"flex items-center px-3 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700\"\r\n              >\r\n                <CheckCircle className=\"w-4 h-4 mr-1\" /> Tamamlandı Olarak İşaretle\r\n              </button>\r\n          )}\r\n\r\n          {(appointment.status === AppointmentStatus.COMPLETED || appointment.status === AppointmentStatus.CANCELLED) && (\r\n            <p className=\"text-sm text-gray-500 italic\">Bu randevu sonuçlandı.</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // 7. Ana JSX (Return)\r\n  return (\r\n    <div className=\"p-8\">\r\n      \r\n      <DashboardHeader title=\"Randevular\" />\r\n      \r\n      <div className=\"mb-6 border-b border-gray-200\">\r\n        <nav className=\"flex space-x-8\">\r\n          <a href=\"#\" className=\"py-4 px-1 border-b-2 border-indigo-600 text-indigo-600 font-semibold\">\r\n            Yaklaşan Randevular\r\n          </a>\r\n          <a href=\"#\" className=\"py-4 px-1 border-b-2 border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700\">\r\n            Geçmiş Randevular\r\n          </a>\r\n        </nav>\r\n      </div>\r\n\r\n      {isLoading && ( <div className=\"text-center p-10 text-gray-500\">Randevular yükleniyor...</div> )}\r\n      \r\n      {error && (\r\n        <div className=\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4\" role=\"alert\">\r\n          <p className=\"font-bold\">Hata!</p>\r\n          <p>{error}</p>\r\n        </div>\r\n      )}\r\n\r\n      {!isLoading && !error && (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          {appointments.length === 0 ? (\r\n            <p className=\"p-10 text-gray-500 col-span-3 text-center\">Gösterilecek randevu bulunamadı.</p>\r\n          ) : (\r\n            appointments.map(renderAppointmentCard)\r\n          )}\r\n        </div>\r\n      )}\r\n      \r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}